<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-08-06
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150806" />
    <meta http-equiv="Content-Language" content="en" />
    <title>The Oracle Coherence Incubator &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<link rel="shortcut icon" href="images/incubator-logo.ico"/>
                      
        
<script src="js/site.js" type="text/javascript"></script>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-39051314-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/coherence-community/coherence-incubator/">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Coherence Incubator Site</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-08-06</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 12.3.1</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Oracle Coherence Incubator</li>
                                
      <li>
    
                          <a href="../index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                  
      <li>
    
                          <a href="../history.html" title="Change History">
          <i class="none"></i>
        Change History</a>
            </li>
                  
      <li>
    
                          <a href="../upgrading.html" title="Upgrading">
          <i class="none"></i>
        Upgrading</a>
            </li>
                  
      <li>
    
                          <a href="../examples.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                  
      <li>
    
                          <a href="../support.html" title="Getting Help">
          <i class="none"></i>
        Getting Help</a>
            </li>
                              <li class="nav-header">Development</li>
                                
      <li>
    
                          <a href="../license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="../release-numbers.html" title="Release Numbers">
          <i class="none"></i>
        Release Numbers</a>
            </li>
                  
      <li>
    
                          <a href="../source-code.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="../building.html" title="Build Instructions">
          <i class="none"></i>
        Build Instructions</a>
            </li>
                  
      <li>
    
                          <a href="../issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                  
      <li>
    
                          <a href="../contributions.html" title="Contributions">
          <i class="none"></i>
        Contributions</a>
            </li>
                  
      <li>
    
                          <a href="../logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                              <li class="nav-header">Plug-Ins</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>The JVisualVM Plug-In</a>
          </li>
                              <li class="nav-header">Modules</li>
                                                                                                                                  
      <li>
    
                          <a href="../common/index.html" title="The Common Package">
          <i class="icon-chevron-down"></i>
        The Common Package</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../common/element-namespace.html" title="The Element Namespace">
          <i class="none"></i>
        The Element Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/filter-namespace.html" title="The Filter Namespace">
          <i class="none"></i>
        The Filter Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/jndi-namespace.html" title="The JNDI Namespace">
          <i class="none"></i>
        The JNDI Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/amazon-ec2-addressprovider.html" title="Working with Amazon EC2">
          <i class="none"></i>
        Working with Amazon EC2</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../commandpattern/index.html" title="The Command Pattern">
          <i class="icon-chevron-down"></i>
        The Command Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../commandpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../functorpattern/index.html" title="The Functor Pattern">
          <i class="icon-chevron-down"></i>
        The Functor Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../functorpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                                                                                                                        
      <li>
    
                          <a href="../processingpattern/index.html" title="The Processing Pattern">
          <i class="icon-chevron-down"></i>
        The Processing Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../processingpattern/configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/monitoring.html" title="Monitoring">
          <i class="none"></i>
        Monitoring</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/processing-namespace.html" title="The Processing Namespace">
          <i class="none"></i>
        The Processing Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/pi-calculation-example.html" title="Pi Calculation Example">
          <i class="none"></i>
        Pi Calculation Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/task-execution-example.html" title="Task Execution Example">
          <i class="none"></i>
        Task Execution Example</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="../messagingpattern/index.html" title="The Messaging Pattern">
          <i class="none"></i>
        The Messaging Pattern</a>
            </li>
                                                              
      <li>
    
                          <a href="../eventdistributionpattern/index.html" title="The Event Distribution Pattern">
          <i class="icon-chevron-down"></i>
        The Event Distribution Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../eventdistributionpattern/event-namespace.html" title="The Event Namespace">
          <i class="none"></i>
        The Event Namespace</a>
            </li>
              </ul>
        </li>
                                                                                                                                                        
      <li>
    
                          <a href="../pushreplicationpattern/index.html" title="The Push Replication Pattern">
          <i class="icon-chevron-down"></i>
        The Push Replication Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-tutorial.html" title="Active Passive Tutorial">
          <i class="none"></i>
        Active Passive Tutorial</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-example.html" title="Active Passive Example">
          <i class="none"></i>
        Active Passive Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-active-example.html" title="Active Active Example">
          <i class="none"></i>
        Active Active Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/hub-and-spoke-example.html" title="Hub And Spoke Example">
          <i class="none"></i>
        Hub And Spoke Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/auction-example.html" title="Auction Example">
          <i class="none"></i>
        Auction Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/web-example.html" title="Web Example">
          <i class="none"></i>
        Web Example</a>
            </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h2>The JVisualVM Plug-In</h2>

<h4>Overview</h4>

<p>Provides a <a href="http://visualvm.java.net/">JVisualVM</a> Plug-in allowing developers to view
a dashboard of summarized statistics and information when connected via JMX to a
Coherence cluster.</p>

<blockquote>
  <p>  This is a developer-oriented tool for viewing information about a single Coherence
    cluster, typically during the development process. For monitoring, managing and
    alerting in production, large-scale or enterprise level environments we recommend
    using operations-oriented tools such as Oracle's Enterprise Manager, Fusion Middleware
    Control and/or other 3rd party tools.</p>
</blockquote>

<h4>Distribution</h4>

<p>The JVisualVM Plug-In is distributed in the NetBeans Module (nbm) file
called: <code>coherence-jvisualvm-12.3.1.nbm</code>.   This is available from
(maven.java.net)[https://maven.java.net] (or Maven Central).   It's also available in the
standard Maven <code>target</code> directory after a successful build.</p>

<p>To build the plug-in you require the following additional repository in your
Maven settings.xml:</p>

<pre><code>&lt;repository&gt;
    &lt;id&gt;jvisualvm&lt;/id&gt;
    &lt;name&gt;jvisualvm&lt;/name&gt;
    &lt;url&gt;http://bits.netbeans.org/nexus/content/groups/visualvm/&lt;/url&gt;
&lt;/repository&gt;
</code></pre>

<h4>Compatibility</h4>

<p>While this plug-in is distributed as part of Coherence Incubator 12, it is routinely
tested with Coherence 3.5.x, 3.6.x, 3.7.1.x and 12.1.2.0.x.</p>

<h4>Installing the Plug-in in JVisualVM</h4>

<p>Once you have acquired or built the JVisualVM Plug-in, perform the following to install the plugin
into your JVisualVM environment:</p>

<ol>
<li>Start JVisualVM by running <code>jvisualvm</code> or <code>jvisualvm.exe</code> (for Windows) from the bin 
directory under your Java home.</li>
<li>Choose Tools -> Plugins.</li>
<li>Click on the 'Downloads' tab.</li>
<li>Click 'Add Plugin' and choose the file <code>coherence-jvisualvm-12.3.1.nbm</code> 
(perhaps from your target directory under coherence-jvisualvm folder).</li>
<li>Click 'Install' and follow the prompts to install.</li>
<li>Once installed, connect to either a remote or local JMX enabled Coherence cache 
server process using JMX.</li>
</ol>

<p>Once connected you will see the 'Coherence Tab' show below:</p>

<p><img src="../images/jvisualvm/jvisualvm.png" alt="Coherence Tab" /></p>

<h4>Functionality</h4>

<p>On selecting the 'Coherence Tab', the following sub-tabs are displayed:</p>

<ul>
<li><p>Overview </p>

<p>Displays high-level information about the Coherence cluster including cluster name, 
version, member count and 'Cluster StatusHA'. Summary graphs show total cluster 
memory available and used, packet publisher and receiver success rates and load 
averages for machines running Coherence.</p></li>
<li><p>Machines</p>

<p>Displays a list of the physical machines that make up the Coherence cluster as well as 
information about the load averages and available memory on these machines.</p></li>
<li><p>Members </p>

<p>Displays the full list of Coherence members/nodes including individual publisher/ receiver 
success rates, memory and send queue sizes.</p></li>
<li><p>Services</p>

<p>Displays information about the running services including partition counts and statusHA values. 
If you select a service, on the next data refresh you will see detailed thread information 
for each node of the service as well as graphs of that information.</p></li>
<li><p>Caches</p>

<p>Displays information about any caches including size, and memory usage information. <br />
To get the correct information to be displayed for memory usage, you must be using the binary 
unit-calculator. If you select a cache, on the next data refresh you will see detailed information 
about each node hosting that service and cache.</p></li>
<li><p>Proxy Servers</p>

<p>If your cluster is running proxy servers for Coherence*Extend, this tab displays information about 
the proxy servers and the number of connections across each proxy server and total connections.</p></li>
<li><p>Coherence*Web</p>

<p>If your cluster is configured for Coherence*Web, this tab displays information about the number
 applications deployed, the number of HTTP sessions being stored as well as other information 
 regarding session reaping.</p></li>
</ul>

<p>On any of the tables you are able to right-click and export the current data from that table as CSV.</p>

<h4>JMX Monitoring Considerations</h4>

<p><strong>Important</strong>: 
When using JMX to retrieve statistics from Coherence clusters which have large number of members, 
refreshing the statistics too often can put additional pressure on the cluster and adversely affect 
overall cluster performance. With this in mind it is recommended to change the 'Management Refresh' 
interval on the cluster you are monitoring from the default of 1 second to a value such as 60 seconds.</p>

<p>This can be achieved by using the following system property on your cache servers:</p>

<pre><code>-Dtangosol.coherence.management.refresh.expiry=60s
</code></pre>

<p>See <a href="http://docs.oracle.com/middleware/1212/coherence/COHMG/jmx.htm#CEGFIGCB">Oracle Documentation</a> for more information.</p>

<p>JVisualVM has screen refresh intervals setup in the Preferences. The plug-in has been built to only refresh data from the 
Coherence MBean server by default every 30 seconds. Combined with the above management refresh setting, this should 
minimize the impact of running the plug-in on a Coherence cluster.</p>

<p>For development or demo purposes only, if you wish to refresh data more often, you can add the following 
property to the JVisualVM command line. (include the quotes)</p>

<pre><code>jvisualvm -J"-Dcom.oracle.coherence.jvisualvm.refreshtime=10"
</code></pre>

<h4>Connecting to WebLogic Server 12.1.2</h4>

<p>In Coherence 12.1.2, we introduced "Managed Coherence Servers", which is a new way of running
Coherence within WebLogic Server environment.  See the <a href="http://docs.oracle.com/middleware/1212/coherence/COHAG/deploy_options.htm#CHDHHFIC">Oracle Documentation</a>
for more information.</p>

<p>When you are running Managed Coherence Servers, the WebLogic Server Domain Runtime MBean server
collects JMX information from all Coherence enabled managed servers and makes it available. <br />
To connect to the Domain Runtime MBean server via JVisualVM requires a few more additional steps:</p>

<ol>
<li><p>Source your WebLogic Server Environment</p>

<p>You should use . ./setWLSEnv.sh (for *NIX) or setWLSEnv.cmd (for Windows) to 
source your WebLogic Server environment.  This script is available off your 
Middleware install directory in wlserver/server/bin.</p></li>
<li><p>Start JVisualVM with Additional Options</p>

<p>You will need to add the WebLogic Server libraries to the classpath as well
as ignoring the MBean check as described below. I am using Linux for my example 
below so modify for your environment. (All options should be on the same line)</p>

<pre><code>$JAVA_HOME/bin/jvisualvm --cp:a \
$WL_HOME/server/lib/wljmxclient.jar:$WL_HOME/server/lib/weblogic.jar \
-J-Djmx.remote.protocol.provider.pkgs=weblogic.management.remote \
-J-Dcom.oracle.coherence.jvisualvm.disable.mbean.check=true
</code></pre></li>
<li><p>Create a Connection from JVisualVM</p>

<p>Once JVisualVM has started, create a new local or remote connection by right-clicking
on either 'Local' or 'Remote' under the 'Applications' tree.  Use the following for the connection 
URI and enter the credentials for the WebLogic Server Admin server.</p>

<pre><code>service:jmx:iiop://hostname:port/jndi/weblogic.management.mbeanservers.domainruntime
</code></pre></li>
<li><p>Once you have selected the newly created connection you will see the 'Coherence Tab'.</p></li>
</ol>

<h4>Troubleshooting</h4>

<ul>
<li><p>Coherence tab does not display when connected to WebLogic Server</p>

<p> By default, the the VisualVMViewProvider class checks for the existence of the 
 <code>Coherence:type=Cluster</code> MBean, and then only displays the Coherence tab.
 In some cases when connecting to WebLogic Server Domain Runtime MBean servers
 in 12.1.2.0.0, this Mbean does not show up immediately.  You can disable this
 check by adding the following proprty.</p>

<pre><code> -J"-Dcom.oracle.coherence.jvisualvm.disable.mbean.check=true"
</code></pre></li>
<li><p>Coherence tab does not display when connected to standard Java Process</p>

<p> Ensure that you have are connecting to a Coherence MBean server. See <a href="http://docs.oracle.com/middleware/1212/coherence/COHMG/jmx.htm">Oracle Documentation</a> 
 for more information on enabling JMX in Coherence.</p></li>
<li><p>Information does not display on tabs</p>

<p> Navigate to 'About Java VisualVM' menu item and click on 'Logfile' to see if there are any
 exceptions raised.  If you have found and issue please raise a bug.</p></li>
</ul>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2015.
          All Rights Reserved.      
                    
      </div>

                                                                  <?xml version="1.0" encoding="UTF-8"?>
<div class="copyright">Copyright Â© 2008-2013 Oracle Corporation. All rights reserved.</div>
                                                          <?xml version="1.0" encoding="UTF-8"?>
<div class="version">Version 12.3.1: 2015-08-06 17:28</div>
                  
        
                </div>
    </footer>
  </body>
</html>

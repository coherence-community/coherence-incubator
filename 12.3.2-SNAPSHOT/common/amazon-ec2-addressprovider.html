<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-06-28
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160628" />
    <meta http-equiv="Content-Language" content="en" />
    <title>The Oracle Coherence Incubator &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<link rel="shortcut icon" href="images/incubator-logo.ico"/>
                      
        
<script src="js/site.js" type="text/javascript"></script>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-39051314-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/coherence-community/coherence-incubator/">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Coherence Incubator Site</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2016-06-28</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 12.3.2-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Oracle Coherence Incubator</li>
                                
      <li>
    
                          <a href="../index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                  
      <li>
    
                          <a href="../history.html" title="Change History">
          <i class="none"></i>
        Change History</a>
            </li>
                  
      <li>
    
                          <a href="../upgrading.html" title="Upgrading">
          <i class="none"></i>
        Upgrading</a>
            </li>
                  
      <li>
    
                          <a href="../examples.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                  
      <li>
    
                          <a href="../support.html" title="Getting Help">
          <i class="none"></i>
        Getting Help</a>
            </li>
                              <li class="nav-header">Development</li>
                                
      <li>
    
                          <a href="../license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="../release-numbers.html" title="Release Numbers">
          <i class="none"></i>
        Release Numbers</a>
            </li>
                  
      <li>
    
                          <a href="../source-code.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="../building.html" title="Build Instructions">
          <i class="none"></i>
        Build Instructions</a>
            </li>
                  
      <li>
    
                          <a href="../issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                  
      <li>
    
                          <a href="../contributions.html" title="Contributions">
          <i class="none"></i>
        Contributions</a>
            </li>
                  
      <li>
    
                          <a href="../logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                              <li class="nav-header">Plug-Ins</li>
                                
      <li>
    
                          <a href="../jvisualvm/index.html" title="The JVisualVM Plug-In">
          <i class="none"></i>
        The JVisualVM Plug-In</a>
            </li>
                              <li class="nav-header">Modules</li>
                                                                                                                                            
      <li>
    
                          <a href="../common/index.html" title="The Common Package">
          <i class="icon-chevron-down"></i>
        The Common Package</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../common/element-namespace.html" title="The Element Namespace">
          <i class="none"></i>
        The Element Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/filter-namespace.html" title="The Filter Namespace">
          <i class="none"></i>
        The Filter Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/jndi-namespace.html" title="The JNDI Namespace">
          <i class="none"></i>
        The JNDI Namespace</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Working with Amazon EC2</a>
          </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../commandpattern/index.html" title="The Command Pattern">
          <i class="icon-chevron-down"></i>
        The Command Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../commandpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../functorpattern/index.html" title="The Functor Pattern">
          <i class="icon-chevron-down"></i>
        The Functor Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../functorpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                                                                                                                        
      <li>
    
                          <a href="../processingpattern/index.html" title="The Processing Pattern">
          <i class="icon-chevron-down"></i>
        The Processing Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../processingpattern/configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/monitoring.html" title="Monitoring">
          <i class="none"></i>
        Monitoring</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/processing-namespace.html" title="The Processing Namespace">
          <i class="none"></i>
        The Processing Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/pi-calculation-example.html" title="Pi Calculation Example">
          <i class="none"></i>
        Pi Calculation Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/task-execution-example.html" title="Task Execution Example">
          <i class="none"></i>
        Task Execution Example</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="../messagingpattern/index.html" title="The Messaging Pattern">
          <i class="none"></i>
        The Messaging Pattern</a>
            </li>
                                                              
      <li>
    
                          <a href="../eventdistributionpattern/index.html" title="The Event Distribution Pattern">
          <i class="icon-chevron-down"></i>
        The Event Distribution Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../eventdistributionpattern/event-namespace.html" title="The Event Namespace">
          <i class="none"></i>
        The Event Namespace</a>
            </li>
              </ul>
        </li>
                                                                                                                                                        
      <li>
    
                          <a href="../pushreplicationpattern/index.html" title="The Push Replication Pattern">
          <i class="icon-chevron-down"></i>
        The Push Replication Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-tutorial.html" title="Active Passive Tutorial">
          <i class="none"></i>
        Active Passive Tutorial</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-example.html" title="Active Passive Example">
          <i class="none"></i>
        Active Passive Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-active-example.html" title="Active Active Example">
          <i class="none"></i>
        Active Active Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/hub-and-spoke-example.html" title="Hub And Spoke Example">
          <i class="none"></i>
        Hub And Spoke Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/auction-example.html" title="Auction Example">
          <i class="none"></i>
        Auction Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/web-example.html" title="Web Example">
          <i class="none"></i>
        Web Example</a>
            </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h2>Working with Amazon EC2</h2>

<p>Amazon provides computing on demand through its <a href="http://aws.amazon.com/ec2/">Elastic Compute Cloud</a> 
(EC2) service. The EC2 service provides a varirty of Linux and Microsoft Windows 
virtual machines on demand.</p>

<h4>Networking environment in the EC2 environment</h4>

<p>In the EC2 environment each virtual machine instance is dynamically assigned a 
private IP address when it launches, that of which is only accessible with in 
EC2. Private addresses can't be pre-determined or pre-defined before launching 
an instance.  </p>

<p>A dynamically defined public IP-address is also allocated to each instance when 
they are launched, making it possible to connect to said instances from the 
outside world (assuming you know the IP-address).  Each public IP-address is 
mapped to the associated private IP using NAT dynamically. </p>

<p>Static public IP-addresses can be allocated (known as an Elastic IP) and mapped 
(using NAT) to the private IP-address of each instance. See <a href="http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/">EC2 documentation</a> 
for further information.</p>

<h4>Well Known Addresses (WKA) and AddressProviders</h4>

<p>By default Coherence uses multi-cast networking technology to discover the Java 
processes in which to form or join a Cluster.   Unfortunately in some network 
environments, like that of Amazon's EC2 service, multi-cast is not available 
or is undesirable. In such environments Coherence adopts the concept of 
"Well-Known Addresses" (WKA), basically a list of known addresses, that can be used
to form or join a cluster.</p>

<p>Out of the box in Coherence, the WKAs can be described using an XML file or 
provided as system properties to the process - see <a href="http://coherence.oracle.com/display/COH35UG/well-known-addresses">well-known-addresses</a> 
for more details.</p>

<p>Coherence also allows a custom java class to be specified (called an <code>AddressProvider</code>)
to dynamically and programmatically specify the WKAs to Coherence. Principally 
this permits the strategy for determining WKAs to be plugged-in, thus allowing
integration with other non-static-list sources of IP-address information.</p>

<h4>The EC2AddressProvider</h4>

<p>The <code>EC2AddressProvider</code> is an implementation of the <code>AddressProvider</code> interface
which uses the Amazon Web services API for EC2 to provide Coherence with the 
set of well known addresses currently running on EC2 (for a particular client). </p>

<p>The <code>EC2AddressProvider</code> queries EC2 to determine what instances are up and 
running then finds all instances that have an "Elastic IP" assigned to it for a 
given Amazon EC2 client. The instances with an Elastic IP assigned to it will be 
selected as the WKA nodes in the Coherence cluster. </p>

<blockquote>
  <p>  It is not the "Elastic IP" address itself that becomes the WKA IP, 
    instead the private IP-address of those instances are used.</p>
</blockquote>

<p>The default port used for the Elastic IP addresses in the WKA list is 8088, 
however that can be overridden by using the system property: <code>tangosol.coherence.ec2addressprovider.port</code></p>

<h4>Authentication with the Amazon EC2 API</h4>

<p>In order to make the calls in to the EC2 API, we need the access key and the 
secret key for the AWS account we are using. There are two ways of specifying 
the keys. One is to provide the access key and the secret key as Java system 
properties like this:</p>

<pre><code>-Dtangosol.coherence.ec2addressprovider.accesskey=YourAccessKey
-Dtangosol.coherence.ec2addressprovider.secretkey=YourSecretKey
</code></pre>

<p>An alternative way is to provide an embedded properties file with the name 
AwsCredentials.properties: (the name of the properties file can be overridden 
with the property tangosol.coherence.ec2addressprovider.propertyfile). The 
properties file need to contain the secret key and the access key for your 
Amazon Web Services account.</p>

<pre><code>secretKey=YourSecretKey
accessKey=YourAccessKey
</code></pre>

<blockquote>
  <p>  Please note the camel casing of the key in the properties file!</p>
</blockquote>

<h4>How to enable the EC2AddressProvider</h4>

<p>The EC2AddressProvider is included in the <code>coherence-common.x.y.z.jar</code>
and a ready made override file that enables the <code>EC2AddressProvider</code> provided 
as a resource in the jar.</p>

<pre><code>-Dtangosol.coherence.override=ec2addressprovider-override.xml
</code></pre>

<h4>Starting a Coherence cluster with the EC2AddressProvider</h4>

<p>Here is the recommended way of starting a Coherence cluster using EC2.</p>

<ul>
<li>Start an instance</li>
<li>Associate an Elastic IP to that instance</li>
<li>Start a Coherence application with the EC2AddressProvider on that instance</li>
<li>Start other instances where Coherence auto-starts with the EC2AddressProvider</li>
</ul>

<h4>Deployment requirements</h4>

<p>The <code>EC2AddressProvider</code> requires jars from the <a href="http://aws.amazon.com/sdkforjava/">AWS Java SDK</a> 
to be on the classpath.  Failure to provide these will result in runtime exceptions.</p>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2016.
          All Rights Reserved.      
                    
      </div>

                                                                  <?xml version="1.0" encoding="UTF-8"?>
<div class="copyright">Copyright Â© 2008-2013 Oracle Corporation. All rights reserved.</div>
                                                          <?xml version="1.0" encoding="UTF-8"?>
<div class="version">Version 12.3.2-SNAPSHOT: 2016-06-28 15:45</div>
                  
        
                </div>
    </footer>
  </body>
</html>

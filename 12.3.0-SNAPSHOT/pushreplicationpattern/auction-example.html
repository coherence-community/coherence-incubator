<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-12-10
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20141210" />
    <meta http-equiv="Content-Language" content="en" />
    <title>The Oracle Coherence Incubator &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<link rel="shortcut icon" href="images/incubator-logo.ico"/>
                      
        
<script src="js/site.js" type="text/javascript"></script>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-39051314-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/coherence-community/coherence-incubator/">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Coherence Incubator Site</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-12-10</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 12.3.0-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Oracle Coherence Incubator</li>
                                
      <li>
    
                          <a href="../index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                  
      <li>
    
                          <a href="../history.html" title="Change History">
          <i class="none"></i>
        Change History</a>
            </li>
                  
      <li>
    
                          <a href="../upgrading.html" title="Upgrading">
          <i class="none"></i>
        Upgrading</a>
            </li>
                  
      <li>
    
                          <a href="../examples.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                  
      <li>
    
                          <a href="../support.html" title="Getting Help">
          <i class="none"></i>
        Getting Help</a>
            </li>
                              <li class="nav-header">Development</li>
                                
      <li>
    
                          <a href="../license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="../release-numbers.html" title="Release Numbers">
          <i class="none"></i>
        Release Numbers</a>
            </li>
                  
      <li>
    
                          <a href="../source-code.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="../building.html" title="Build Instructions">
          <i class="none"></i>
        Build Instructions</a>
            </li>
                  
      <li>
    
                          <a href="../issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                  
      <li>
    
                          <a href="../contributions.html" title="Contributions">
          <i class="none"></i>
        Contributions</a>
            </li>
                  
      <li>
    
                          <a href="../logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                              <li class="nav-header">Plug-Ins</li>
                                
      <li>
    
                          <a href="../jvisualvm/index.html" title="The JVisualVM Plug-In">
          <i class="none"></i>
        The JVisualVM Plug-In</a>
            </li>
                              <li class="nav-header">Modules</li>
                                                                                                                                  
      <li>
    
                          <a href="../common/index.html" title="The Common Package">
          <i class="icon-chevron-down"></i>
        The Common Package</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../common/element-namespace.html" title="The Element Namespace">
          <i class="none"></i>
        The Element Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/filter-namespace.html" title="The Filter Namespace">
          <i class="none"></i>
        The Filter Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/jndi-namespace.html" title="The JNDI Namespace">
          <i class="none"></i>
        The JNDI Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/amazon-ec2-addressprovider.html" title="Working with Amazon EC2">
          <i class="none"></i>
        Working with Amazon EC2</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../commandpattern/index.html" title="The Command Pattern">
          <i class="icon-chevron-down"></i>
        The Command Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../commandpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../functorpattern/index.html" title="The Functor Pattern">
          <i class="icon-chevron-down"></i>
        The Functor Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../functorpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                                                                                                                        
      <li>
    
                          <a href="../processingpattern/index.html" title="The Processing Pattern">
          <i class="icon-chevron-down"></i>
        The Processing Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../processingpattern/configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/monitoring.html" title="Monitoring">
          <i class="none"></i>
        Monitoring</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/processing-namespace.html" title="The Processing Namespace">
          <i class="none"></i>
        The Processing Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/pi-calculation-example.html" title="Pi Calculation Example">
          <i class="none"></i>
        Pi Calculation Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/task-execution-example.html" title="Task Execution Example">
          <i class="none"></i>
        Task Execution Example</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="../messagingpattern/index.html" title="The Messaging Pattern">
          <i class="none"></i>
        The Messaging Pattern</a>
            </li>
                                                              
      <li>
    
                          <a href="../eventdistributionpattern/index.html" title="The Event Distribution Pattern">
          <i class="icon-chevron-down"></i>
        The Event Distribution Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../eventdistributionpattern/event-namespace.html" title="The Event Namespace">
          <i class="none"></i>
        The Event Namespace</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                  
      <li>
    
                          <a href="../pushreplicationpattern/index.html" title="The Push Replication Pattern">
          <i class="icon-chevron-down"></i>
        The Push Replication Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-tutorial.html" title="Active Passive Tutorial">
          <i class="none"></i>
        Active Passive Tutorial</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-example.html" title="Active Passive Example">
          <i class="none"></i>
        Active Passive Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-active-example.html" title="Active Active Example">
          <i class="none"></i>
        Active Active Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/hub-and-spoke-example.html" title="Hub And Spoke Example">
          <i class="none"></i>
        Hub And Spoke Example</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Auction Example</a>
          </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/web-example.html" title="Web Example">
          <i class="none"></i>
        Web Example</a>
            </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h2>The Push Replication Auction Example</h2>

<h4>Prerequisites</h4>

<p>To run this example the Oracle Coherence Incubator must be built and
installed locally.  Instructions on how to achieve this are located here:
<a href="building.html">Building the Oracle Coherence Incubator</a>.</p>

<h4>Source Code</h4>

<p>The source code for this example is located in the <code>coherence-pushreplicationpattern-examples</code>
module of the Oracle Coherence Incubator.</p>

<h4>Overview</h4>

<p>This example demonstrates how a real-time distributed auction, the items
of which are concurrently and simultaneously bid against in two clusters.</p>

<p>More specifically, this example highlights the use of multiple topologies with
Push Replications, namely "Active-Active" for bid replication and "Active-Passive"
for auction control.</p>

<p>This examples uses two clusters, "Site 1" displayed as "London" and "Site 2"
displayed as "New York".</p>

<p>"Site 1" is special in that this is where the Auction state is maintained by the
Auctioneer.  The Auction state controls if an auction is running and how long one
has to run.  This information is only updated in "Site 1", but it is actively replicated
to "Site 2" so that Bidders there may know if/when/how long they may make bids.</p>

<p>Each site allows Bidders to concurrently make Bids, on any item in the Auction
while an Auction is running.</p>

<p>Bidders always offer Bids "locally" in the cluster to which they are connected.
They don't make bids in both clusters.  If a bid is higher than want is currently
available "locally", the bid is accepted.  After a bid is accepted, the Push
Replication Pattern pushes the bid to the other cluster where by it is compared
with any existing bids there.  Should it be higher, the bid is accepted.  This
logic is implemented using a custom <code>ConflictResolver</code>.  As you will soon see
when running the example, this custom <code>ConflictResolver</code> implementation ensures
that both clusters eventually become and remain synchronized.  That is, both
clusters will eventually show the same winning bids.</p>

<blockquote>
  <p>  The following instructions assume that <code>$COHERENCE_INCUBATOR</code> is the directory
    in which the Oracle Coherence Incubator source code has been downloaded,
    unpacked and built according to the prerequisites outlined above.</p>
</blockquote>

<h4>Step 1. Running the Active Server for Site 1</h4>

<p>Execute the following shell commands to start the "Active Server for Site 1".</p>

<p>In a new Terminal / Shell Console for the "Active Server for Site 1"</p>

<ol>
<li><p>Change to the Push Replication Pattern Examples directory.</p>

<p><code>cd $COHERENCE_INCUBATOR/coherence-pushreplicationpattern-examples/target</code></p></li>
<li><p>Run the "Active Server for Site 1"</p>

<p><code>java -jar coherence-pushreplicationpattern-examples-12.3.0-SNAPSHOT.jar auction-site1-server.properties</code></p></li>
</ol>

<h4>Step 2. Running the Active Server for Site 2</h4>

<p>Execute the following shell commands to start the "Active Server for Site 2".</p>

<p>In a new Terminal / Shell Console for the "Active Server for Site 2"</p>

<ol>
<li><p>Change to the Push Replication Pattern Examples directory.</p>

<p><code>cd $COHERENCE_INCUBATOR/coherence-pushreplicationpattern-examples/target</code></p></li>
<li><p>Run the "Active Server for Site 2"</p>

<p><code>java -jar coherence-pushreplicationpattern-examples-12.3.0-SNAPSHOT.jar auction-site2-server.properties</code></p></li>
</ol>

<h4>Step 3. Running the Auction Application for Site 1</h4>

<p>Execute the following shell commands to start the "Auction Application for Site 1".
This while launch a GUI to both control the Auction and make Bids in Site 1.</p>

<p>In a new Terminal / Shell Console for the "Auction Application for Site 1"</p>

<ol>
<li><p>Change to the Push Replication Pattern Examples directory.</p>

<p><code>cd $COHERENCE_INCUBATOR/coherence-pushreplicationpattern-examples/target</code></p></li>
<li><p>Run the "Auction Application for Site 1"</p>

<p><code>java -jar coherence-pushreplicationpattern-examples-12.3.0-SNAPSHOT.jar auction-site1.properties</code></p></li>
</ol>

<p>The application interface should look something like the following:</p>

<p><img src="../images/pushreplicationpattern/auction-step3.png" alt="Auction Applcation for Site 1" /></p>

<h4>Step 4. Running the Auction Application for Site 2</h4>

<p>Execute the following shell commands to start the "Auction Application for Site 2".
This while launch a GUI to make Bids in Site 2.</p>

<p>In a new Terminal / Shell Console for the "Auction Application for Site 2"</p>

<ol>
<li><p>Change to the Push Replication Pattern Examples directory.</p>

<p><code>cd $COHERENCE_INCUBATOR/coherence-pushreplicationpattern-examples/target</code></p></li>
<li><p>Run the "Auction Application for Site 2"</p>

<p><code>java -jar coherence-pushreplicationpattern-examples-12.3.0-SNAPSHOT.jar auction-site2.properties</code></p></li>
</ol>

<p>The application interface should look something like the following:</p>

<p><img src="../images/pushreplicationpattern/auction-step4.png" alt="Auction Applcation for Site 2" /></p>

<h4>Step 5. Running the Auction.</h4>

<p>Now that you have both sites and auction applications running, the next step is
to start the Auction.  To do this simply press the "Start" button in the Site 1
(London) application.</p>

<p><img src="../images/pushreplicationpattern/auction-step5-1.png" alt="Starting the Auction in Site 1" /></p>

<p>Notice once you do this the auction will start and there will be a count-down
timer indicating the remaining duration of the auction.</p>

<p><img src="../images/pushreplicationpattern/auction-step5-2.png" alt="The Auction Count Down Timer in Site 1" /></p>

<p>At this point in time there are no bids being placed.   To start the bidding
process you need to change to the "Automated Bidding" tab and increase either, or
both, the bidding rate and/or the number of bidders.</p>

<p><img src="../images/pushreplicationpattern/auction-step5-3.png" alt="The Automated Bidding Tab in Site 1" /></p>

<p>Once you have done this press the "Start" button to have Bidding commence.</p>

<p><img src="../images/pushreplicationpattern/auction-step5-4.png" alt="The Automated Bidders in Site 1" /></p>

<p>Now change back to the "Auction Monitor" tab to see the bids being placed.</p>

<p><img src="../images/pushreplicationpattern/auction-step5-5.png" alt="The Auction Monitor Tab in Site 1" /></p>

<p><img src="../images/pushreplicationpattern/auction-step5-6.png" alt="The Auction Monitor Showing Bids in Site 1" /></p>

<p>Notice that the bids being displayed in Site 1 (London) are also being replicated
to the Site 2 (New York).</p>

<p>To see the two-way concurrent bids taking place, add some "Bidders" to the New York
site.</p>

<p>Once the auction as ended, or if you press "Stop" on the Site 1 (London) application,
you'll be able to see that both sites have the same auction outcome.</p>

<p><img src="../images/pushreplicationpattern/auction-step5-7a.png" alt="Completed Auction in Site 1" /></p>

<p><img src="../images/pushreplicationpattern/auction-step5-7b.png" alt="Completed Auction in Site 2" /></p>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2014.
          All Rights Reserved.      
                    
      </div>

                                                                  <?xml version="1.0" encoding="UTF-8"?>
<div class="copyright">Copyright Â© 2008-2013 Oracle Corporation. All rights reserved.</div>
                                                          <?xml version="1.0" encoding="UTF-8"?>
<div class="version">Version 12.3.0-SNAPSHOT: 2014-12-10 10:01</div>
                  
        
                </div>
    </footer>
  </body>
</html>

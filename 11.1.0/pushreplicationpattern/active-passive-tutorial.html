<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Aug 8, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130808" />
    <meta http-equiv="Content-Language" content="en" />
    <title>The Oracle Coherence Incubator - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<link rel="shortcut icon" href="images/incubator-logo.ico"/>
                      
        
<script src="js/site.js" type="text/javascript"></script>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-39051314-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/coherence-community/coherence-incubator/">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Coherence Incubator Site</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-08-08</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 11.1.0</li>
                      
                
            
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                <ul class="nav nav-list">
                    <li class="nav-header">Oracle Coherence Incubator</li>
                                
      <li>
    
                          <a href="../index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                  
      <li>
    
                          <a href="../history.html" title="Change History">
          <i class="none"></i>
        Change History</a>
            </li>
                  
      <li>
    
                          <a href="../upgrading.html" title="Upgrading">
          <i class="none"></i>
        Upgrading</a>
            </li>
                  
      <li>
    
                          <a href="../examples.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                  
      <li>
    
                          <a href="../support.html" title="Getting Help">
          <i class="none"></i>
        Getting Help</a>
            </li>
                              <li class="nav-header">Development</li>
                                
      <li>
    
                          <a href="../license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="../release-numbers.html" title="Release Numbers">
          <i class="none"></i>
        Release Numbers</a>
            </li>
                  
      <li>
    
                          <a href="../source-code.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="../building.html" title="Build Instructions">
          <i class="none"></i>
        Build Instructions</a>
            </li>
                  
      <li>
    
                          <a href="../issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                  
      <li>
    
                          <a href="../contributions.html" title="Contributions">
          <i class="none"></i>
        Contributions</a>
            </li>
                  
      <li>
    
                          <a href="../logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                              <li class="nav-header">Modules</li>
                                                                                                                                                                                                                                              
      <li>
    
                          <a href="../common/index.html" title="The Common Package">
          <i class="icon-chevron-down"></i>
        The Common Package</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../common/extensible-environments-overview.html" title="Extensible Environments">
          <i class="none"></i>
        Extensible Environments</a>
            </li>
                      
      <li>
    
                          <a href="../common/extensible-environments-namespaces.html" title="Cache Config Namespaces">
          <i class="none"></i>
        Cache Config Namespaces</a>
            </li>
                      
      <li>
    
                          <a href="../common/extensible-environments-tutorial.html" title="Custom Namespaces Tutorial">
          <i class="none"></i>
        Custom Namespaces Tutorial</a>
            </li>
                      
      <li>
    
                          <a href="../common/coherence-namespace.html" title="The Coherence Namespace">
          <i class="none"></i>
        The Coherence Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/element-namespace.html" title="The Element Namespace">
          <i class="none"></i>
        The Element Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/filter-namespace.html" title="The Filter Namespace">
          <i class="none"></i>
        The Filter Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/jndi-namespace.html" title="The JNDI Namespace">
          <i class="none"></i>
        The JNDI Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/instance-namespace.html" title="The Instance Namespace*">
          <i class="none"></i>
        The Instance Namespace*</a>
            </li>
                      
      <li>
    
                          <a href="../common/value-namespace.html" title="The Value Namespace*">
          <i class="none"></i>
        The Value Namespace*</a>
            </li>
                      
      <li>
    
                          <a href="../common/amazon-ec2-addressprovider.html" title="Working with Amazon EC2">
          <i class="none"></i>
        Working with Amazon EC2</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../commandpattern/index.html" title="The Command Pattern">
          <i class="icon-chevron-down"></i>
        The Command Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../commandpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../functorpattern/index.html" title="The Functor Pattern">
          <i class="icon-chevron-down"></i>
        The Functor Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../functorpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                                                                                                                        
      <li>
    
                          <a href="../processingpattern/index.html" title="The Processing Pattern">
          <i class="icon-chevron-down"></i>
        The Processing Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../processingpattern/configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/monitoring.html" title="Monitoring">
          <i class="none"></i>
        Monitoring</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/processing-namespace.html" title="The Processing Namespace">
          <i class="none"></i>
        The Processing Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/pi-calculation-example.html" title="Pi Calculation Example">
          <i class="none"></i>
        Pi Calculation Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/task-execution-example.html" title="Task Execution Example">
          <i class="none"></i>
        Task Execution Example</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="../messagingpattern/index.html" title="The Messaging Pattern">
          <i class="none"></i>
        The Messaging Pattern</a>
            </li>
                                                              
      <li>
    
                          <a href="../eventdistributionpattern/index.html" title="The Event Distribution Pattern">
          <i class="icon-chevron-down"></i>
        The Event Distribution Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../eventdistributionpattern/event-namespace.html" title="The Event Namespace">
          <i class="none"></i>
        The Event Namespace</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                  
      <li>
    
                          <a href="../pushreplicationpattern/index.html" title="The Push Replication Pattern">
          <i class="icon-chevron-down"></i>
        The Push Replication Pattern</a>
                    <ul class="nav nav-list">
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Active Passive Tutorial</a>
          </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-example.html" title="Active Passive Example">
          <i class="none"></i>
        Active Passive Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-active-example.html" title="Active Active Example">
          <i class="none"></i>
        Active Active Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/hub-and-spoke-example.html" title="Hub And Spoke Example">
          <i class="none"></i>
        Hub And Spoke Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/auction-example.html" title="Auction Example">
          <i class="none"></i>
        Auction Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/web-example.html" title="Web Example">
          <i class="none"></i>
        Web Example</a>
            </li>
              </ul>
        </li>
            </ul>
                
            
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h2>The Push Replication Pattern Active-Passive Tutorial</h2>

<p>The following is a brief tutorial outlining the use of the Push Replication Pattern
in a simple "active-passive" topology.  In this topology one cluster, the
"active" cluster, uses an application that performs read/write operations.  These
operations are then replicated to another cluster, the "passive" cluster,
that of which is being used predominantly in a read-only mode.  Entries that
may be updated by applications in the "destination" cluster are not replicated
back to the "active" cluster.</p>

<p><img src="../images/pushreplicationpattern/active-passive.png" alt="The Active Passive Topology" /></p>

<blockquote>
  <p>  The <code>coherence-pushreplicationpattern-examples</code> project contains several
    detailed applications anc configurations for Push Replication, including those
    for the Active-Passive, Active-Active and Hub-And-Spoke topologies.  This
    are an invaluable resource for learning how to configure Push Replication
    in a variety of topologies.</p>
</blockquote>

<h5>Step 1. A Simple Cache Configuration</h5>

<p>Consider the following Coherence Cache Configuration that defines a simple
Distributed Cache called <code>my-cache</code>, that of which we'd like to replicated to
another cluster.</p>

<pre><code>&lt;cache-config&gt;
    &lt;defaults&gt;
        &lt;serializer&gt;pof&lt;/serializer&gt;
    &lt;/defaults&gt;

    &lt;caching-scheme-mapping&gt;
        &lt;cache-mapping&gt;
            &lt;cache-name&gt;my-cache&lt;/cache-name&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;
        &lt;/cache-mapping&gt;
    &lt;/caching-scheme-mapping&gt;

    &lt;caching-schemes&gt;
        &lt;distributed-scheme&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;backing-map-scheme&gt;
                &lt;local-scheme /&gt;
            &lt;/backing-map-scheme&gt;

            &lt;autostart&gt;true&lt;/autostart&gt;
        &lt;/distributed-scheme&gt;
    &lt;/caching-schemes&gt;
&lt;/cache-config&gt;
</code></pre>

<h5>Step 2. Adding a Publishing Cache Store</h5>

<p>The first change to the configuration to enable Push Eeplication is to modify
the <code>&lt;backing-map-scheme&gt;</code> configuration to introduce a specialized <code>CacheStore</code>
implementation called the <code>PublishingCacheStore</code>.</p>

<p>Unlike most <code>CacheStore</code> implementations that typically read/write to a Database,
the purpose of a <code>PublishingCacheStore</code> is to <em>publish</em> operations that occur on
a cache as <code>Events</code> to an <code>EventDistributor</code>.</p>

<p>The configuration of a <code>PublishingCacheStore</code> is like any other <code>CacheStore</code> in
that we need to introduce a <code>&lt;read-write-backing-map-scheme&gt;</code>.</p>

<p>A Coherence Cache Configuration for this is as follows:</p>

<pre><code>&lt;cache-config&gt;
    &lt;defaults&gt;
        &lt;serializer&gt;pof&lt;/serializer&gt;
    &lt;/defaults&gt;

    &lt;caching-scheme-mapping&gt;
        &lt;cache-mapping&gt;
            &lt;cache-name&gt;my-cache&lt;/cache-name&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;
        &lt;/cache-mapping&gt;
    &lt;/caching-scheme-mapping&gt;

    &lt;caching-schemes&gt;
        &lt;distributed-scheme&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;backing-map-scheme&gt;
                &lt;read-write-backing-map-scheme&gt;
                    &lt;internal-cache-scheme&gt;
                        &lt;local-scheme&gt;
                        &lt;/local-scheme&gt;
                    &lt;/internal-cache-scheme&gt;

                    &lt;cachestore-scheme&gt;
                        &lt;class-scheme&gt;
                            &lt;class-name&gt;com.oracle.coherence.patterns.pushreplication.PublishingCacheStore&lt;/class-name&gt;
                            &lt;init-params&gt;
                                &lt;init-param&gt;
                                    &lt;param-type&gt;java.lang.String&lt;/param-type&gt;
                                    &lt;param-value&gt;{cache-name}&lt;/param-value&gt;
                                &lt;/init-param&gt;
                            &lt;/init-params&gt;
                        &lt;/class-scheme&gt;
                    &lt;/cachestore-scheme&gt;
                &lt;/read-write-backing-map-scheme&gt;
            &lt;/backing-map-scheme&gt;

            &lt;autostart&gt;true&lt;/autostart&gt;
        &lt;/distributed-scheme&gt;
    &lt;/caching-schemes&gt;
&lt;/cache-config&gt;
</code></pre>

<p>While this configuration is valid for Coherence, it's not yet enough to work
correctly with Push Replication.   Although we've defined our <code>PublishingCacheStore</code>
we still need to define the <code>EventDistributor</code>.</p>

<h5>Step 3. Configuring An Event Distributor</h5>

<p>The purpose of an <code>EventDistributor</code> is to distribute <code>Events</code> to one or more
<code>Event Channels</code>, those of which may be used to process and replay the said <code>Events</code>.</p>

<p>The configuration of an <code>EventDistributor</code> occurs <em>inside</em> and <em>together</em> with the
<code>&lt;cache-mapping&gt;</code> of the cache that is to be replicated.</p>

<p>A Coherence Cache Configuration for this is as follows:</p>

<pre><code>&lt;cache-config
    xmlns:element="class://com.oracle.coherence.environment.extensible.namespaces.XmlElementProcessingNamespaceContentHandler"
    xmlns:event="class://com.oracle.coherence.patterns.eventdistribution.configuration.EventDistributionNamespaceContentHandler"
    element:introduce-cache-config="coherence-messagingpattern-cache-config.xml"&gt;

    &lt;defaults&gt;
        &lt;serializer&gt;pof&lt;/serializer&gt;
    &lt;/defaults&gt;

    &lt;caching-scheme-mapping&gt;
        &lt;cache-mapping&gt;
            &lt;cache-name&gt;my-cache&lt;/cache-name&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;event:distributor&gt;
                &lt;event:distributor-name&gt;{cache-name}&lt;/event:distributor-name&gt;
                &lt;event:distributor-external-name&gt;{site-name}-{cluster-name}-{cache-name}&lt;/event:distributor-external-name&gt;

                &lt;event:distributor-scheme&gt;
                    &lt;event:coherence-based-distributor-scheme/&gt;
                &lt;/event:distributor-scheme&gt;
            &lt;/event:distributor&gt;

        &lt;/cache-mapping&gt;
    &lt;/caching-scheme-mapping&gt;

    &lt;caching-schemes&gt;
        &lt;distributed-scheme&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;backing-map-scheme&gt;
                &lt;read-write-backing-map-scheme&gt;
                    &lt;internal-cache-scheme&gt;
                        &lt;local-scheme&gt;
                        &lt;/local-scheme&gt;
                    &lt;/internal-cache-scheme&gt;

                    &lt;cachestore-scheme&gt;
                        &lt;class-scheme&gt;
                            &lt;class-name&gt;com.oracle.coherence.patterns.pushreplication.PublishingCacheStore&lt;/class-name&gt;
                            &lt;init-params&gt;
                                &lt;init-param&gt;
                                    &lt;param-type&gt;java.lang.String&lt;/param-type&gt;
                                    &lt;param-value&gt;{cache-name}&lt;/param-value&gt;
                                &lt;/init-param&gt;
                            &lt;/init-params&gt;
                        &lt;/class-scheme&gt;
                    &lt;/cachestore-scheme&gt;
                &lt;/read-write-backing-map-scheme&gt;
            &lt;/backing-map-scheme&gt;

            &lt;autostart&gt;true&lt;/autostart&gt;
        &lt;/distributed-scheme&gt;
    &lt;/caching-schemes&gt;
&lt;/cache-config&gt;
</code></pre>

<blockquote>
  <p>  One of the main requirements for configuring Push Replication is that of
    appropriately configuring the <a href="../eventdistributionpattern/index.html">Event Distribution Pattern</a>.
    Consequently we strongly recommend investing some time in understanding the
    configuration options that are available, especially through the reference
    documentation for the <a href="../eventdistributionpattern/event-namespace.html"><code>event</code> Namespace</a></p>
</blockquote>

<p>The above configuration defines an <code>EventDistributor</code> that will be
named the same as the declared cache name (hence the <code>{cache-name}</code>).  The exact
implementation will be based on Coherence (hence the <code>&lt;event:coherence-based-distributor-scheme&gt;</code>)
that of which is internally based on the <a href="../messagingpattern/index.html">Coherence Messaging Pattern</a>.</p>

<p>As a consequence of using the Coherence-based implementation, the above configuration
additionally must "introduce" the cache configuration required for Coherence Messaging.</p>

<p>Now that we've defined an <code>EventDistributor</code> the next task is to define appropriate
<code>Event Channels</code> that can appropriately process and replay <code>Events</code>.</p>

<h5>Step 4. Configuring A Logging Event Channel</h5>

<p>The simplest type of <code>EventChannel</code> to configure is one that logs <code>Events</code>.  As
with all <code>EventChannels</code>, configuring a <code>StdErrEventChannel</code> for logging to <code>stderr</code>
occurs as part of configuring the <code>EventDistributor</code>.</p>

<p>A Coherence Cache Configuration for this is as follows:</p>

<pre><code>&lt;cache-config
    xmlns:element="class://com.oracle.coherence.environment.extensible.namespaces.XmlElementProcessingNamespaceContentHandler"
    xmlns:event="class://com.oracle.coherence.patterns.eventdistribution.configuration.EventDistributionNamespaceContentHandler"
    element:introduce-cache-config="coherence-messagingpattern-cache-config.xml"&gt;

    &lt;defaults&gt;
        &lt;serializer&gt;pof&lt;/serializer&gt;
    &lt;/defaults&gt;

    &lt;caching-scheme-mapping&gt;
        &lt;cache-mapping&gt;
            &lt;cache-name&gt;my-cache&lt;/cache-name&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;event:distributor&gt;
                &lt;event:distributor-name&gt;{cache-name}&lt;/event:distributor-name&gt;
                &lt;event:distributor-external-name&gt;{site-name}-{cluster-name}-{cache-name}&lt;/event:distributor-external-name&gt;

                &lt;event:distributor-scheme&gt;
                    &lt;event:coherence-based-distributor-scheme/&gt;
                &lt;/event:distributor-scheme&gt;

                &lt;event:distribution-channels&gt;
                    &lt;event:distribution-channel&gt;
                        &lt;event:channel-name&gt;Logger&lt;/event:channel-name&gt;
                        &lt;event:starting-mode&gt;enabled&lt;/event:starting-mode&gt;

                        &lt;event:channel-scheme&gt;
                            &lt;event:stderr-channel-scheme/&gt;
                        &lt;/event:channel-scheme&gt;
                    &lt;/event:distribution-channel&gt;
                &lt;/event:distribution-channels&gt;
            &lt;/event:distributor&gt;

        &lt;/cache-mapping&gt;
    &lt;/caching-scheme-mapping&gt;

    &lt;caching-schemes&gt;
        &lt;distributed-scheme&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;backing-map-scheme&gt;
                &lt;read-write-backing-map-scheme&gt;
                    &lt;internal-cache-scheme&gt;
                        &lt;local-scheme&gt;
                        &lt;/local-scheme&gt;
                    &lt;/internal-cache-scheme&gt;

                    &lt;cachestore-scheme&gt;
                        &lt;class-scheme&gt;
                            &lt;class-name&gt;com.oracle.coherence.patterns.pushreplication.PublishingCacheStore&lt;/class-name&gt;
                            &lt;init-params&gt;
                                &lt;init-param&gt;
                                    &lt;param-type&gt;java.lang.String&lt;/param-type&gt;
                                    &lt;param-value&gt;{cache-name}&lt;/param-value&gt;
                                &lt;/init-param&gt;
                            &lt;/init-params&gt;
                        &lt;/class-scheme&gt;
                    &lt;/cachestore-scheme&gt;
                &lt;/read-write-backing-map-scheme&gt;
            &lt;/backing-map-scheme&gt;

            &lt;autostart&gt;true&lt;/autostart&gt;
        &lt;/distributed-scheme&gt;
    &lt;/caching-schemes&gt;
&lt;/cache-config&gt;
</code></pre>

<p>While this configuration only defines a single <code>EventChannel</code>, it's possible to define
more than one.   That is, every <code>EventDistributor</code> is actually capable of distributing
<code>Events</code> concurrently to many independently defined and managed <code>EventChannels</code>.
This approach provides a flexible means of handling, processing and distributing
<code>Events</code> across multiple channel implementations, including those that connect to
other clusters.</p>

<p>In what follows we'll discuss how to configure a <code>RemoteCacheChannel</code>, that of
which is capable of replaying <code>Events</code> in another cluster, thus replicating the
underlying cache operations that caused the said <code>Events</code>.</p>

<p>For detailed information on the variety of out-of-the-box <code>EventChannel</code> implementations
that are available, together with their configuration, please refer to the
<a href="../eventdistributionpattern/event-namespace.html">Event Namespace</a>.</p>

<h5>Step 5. Configuring A Remote Cache Channel</h5>

<p>The purpose of a <code>RemoteCacheChannel</code> is to replay cache <code>Events</code> in a configured
remote cache.  Consequently in order to configure a <code>RemoteCacheChannel</code> one must:</p>

<ol>
<li><p>Define a Remote Cache Scheme, that of which will be used to specify the
remote cache configuration.</p></li>
<li><p>Establish another Cluster, together with Proxy service to which the
Remote Cache Scheme will contect.</p></li>
<li><p>Define a <code>RemoteCacheChannel</code>, that of which refers to the Remote Cache Scheme.</p></li>
</ol>

<p>A Coherence Cache Configuration for this is as follows:</p>

<pre><code>&lt;cache-config
    xmlns:element="class://com.oracle.coherence.environment.extensible.namespaces.XmlElementProcessingNamespaceContentHandler"
    xmlns:event="class://com.oracle.coherence.patterns.eventdistribution.configuration.EventDistributionNamespaceContentHandler"
    element:introduce-cache-config="coherence-messagingpattern-cache-config.xml"&gt;

    &lt;defaults&gt;
        &lt;serializer&gt;pof&lt;/serializer&gt;
    &lt;/defaults&gt;

    &lt;caching-scheme-mapping&gt;
        &lt;cache-mapping&gt;
            &lt;cache-name&gt;my-cache&lt;/cache-name&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;event:distributor&gt;
                &lt;event:distributor-name&gt;{cache-name}&lt;/event:distributor-name&gt;
                &lt;event:distributor-external-name&gt;{site-name}-{cluster-name}-{cache-name}&lt;/event:distributor-external-name&gt;

                &lt;event:distributor-scheme&gt;
                    &lt;event:coherence-based-distributor-scheme/&gt;
                &lt;/event:distributor-scheme&gt;

                &lt;event:distribution-channels&gt;
                    &lt;event:distribution-channel&gt;
                        &lt;event:channel-name&gt;Remote Cache&lt;/event:channel-name&gt;
                        &lt;event:starting-mode&gt;enabled&lt;/event:starting-mode&gt;

                        &lt;event:channel-scheme&gt;
                            &lt;event:remote-cache-channel-scheme&gt;
                                &lt;event:remote-cache-service-name&gt;my-remote-cache-scheme&lt;/event:remote-cache-service-name&gt;
                            &lt;/event:remote-cache-channel-scheme&gt;
                        &lt;/event:channel-scheme&gt;
                    &lt;/event:distribution-channel&gt;
                &lt;/event:distribution-channels&gt;
            &lt;/event:distributor&gt;

        &lt;/cache-mapping&gt;
    &lt;/caching-scheme-mapping&gt;

    &lt;caching-schemes&gt;
        &lt;distributed-scheme&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;backing-map-scheme&gt;
                &lt;read-write-backing-map-scheme&gt;
                    &lt;internal-cache-scheme&gt;
                        &lt;local-scheme&gt;
                        &lt;/local-scheme&gt;
                    &lt;/internal-cache-scheme&gt;

                    &lt;cachestore-scheme&gt;
                        &lt;class-scheme&gt;
                            &lt;class-name&gt;com.oracle.coherence.patterns.pushreplication.PublishingCacheStore&lt;/class-name&gt;
                            &lt;init-params&gt;
                                &lt;init-param&gt;
                                    &lt;param-type&gt;java.lang.String&lt;/param-type&gt;
                                    &lt;param-value&gt;{cache-name}&lt;/param-value&gt;
                                &lt;/init-param&gt;
                            &lt;/init-params&gt;
                        &lt;/class-scheme&gt;
                    &lt;/cachestore-scheme&gt;
                &lt;/read-write-backing-map-scheme&gt;
            &lt;/backing-map-scheme&gt;

            &lt;autostart&gt;true&lt;/autostart&gt;
        &lt;/distributed-scheme&gt;

        &lt;!-- the remote cache scheme --&gt;
        &lt;remote-cache-scheme&gt;
            &lt;scheme-name&gt;my-remote-cache-scheme&lt;/scheme-name&gt;
            &lt;initiator-config&gt;
                &lt;tcp-initiator&gt;
                    &lt;remote-addresses&gt;
                        &lt;socket-address&gt;
                            &lt;address system-property="remote.address"&gt;localhost&lt;/address&gt;
                            &lt;port system-property="remote.port"&gt;10000&lt;/port&gt;
                        &lt;/socket-address&gt;
                    &lt;/remote-addresses&gt;
                    &lt;connect-timeout&gt;10s&lt;/connect-timeout&gt;
                &lt;/tcp-initiator&gt;
                &lt;outgoing-message-handler&gt;
                    &lt;request-timeout&gt;10s&lt;/request-timeout&gt;
                &lt;/outgoing-message-handler&gt;
            &lt;/initiator-config&gt;
        &lt;/remote-cache-scheme&gt;
    &lt;/caching-schemes&gt;
&lt;/cache-config&gt;
</code></pre>

<blockquote>
  <p>  The name of the cache into which the <code>Events</code> will be replayed is always
    the same as the cache from which the <code>Events</code> originated.   To replay the
    <code>Events into a different cache, you should use a</code>RemoveClusterChannel`.</p>
  
  <p>  It is highly recommended that you use a <code>RemoteClusterChannel</code> instead of
    a <code>RemoteCacheChannel</code> as remote cluster channels perform all <code>Event</code>
    processing in configurable batches.  This <code>RemoteCacheChannel</code> will only
    perform simple updates, one at a time, regardless of the configured batch size.
    Furthermore, <code>RemoteClusterChannels</code> offer a greater variety of modes and
    flexibility.</p>
</blockquote>

<h5>Step 6. Configuring A Remote Cluster Channel</h5>

<p>In most situations the Event Distribution Channel implementation to use for
Push Replication is the <code>RemoteClusterChannel</code>.</p>

<p>The <code>RemoteClusterChannel</code> offers significant advantages over the <code>RemoteCacheChannel</code>
as it performs distribution and replay operations in configurable batches.   This
can significantly reduce network round-trips between clusters, dramatically improving
through-put over <code>RemoteCacheChannels</code>.  Like <code>RemoteCacheChannels</code>, configuring
a <code>RemoteClusterChannel</code> requires a few steps.</p>

<ol>
<li><p>Define a Remote Invocation Scheme, that of which will be used to send, invoke
and perform batches of updates on a remote cluster.</p></li>
<li><p>Establish another Cluster, together with Proxy service to which the
Remote Invocation Scheme will contect.</p></li>
<li><p>Define a <code>RemoteClusterChannel</code>, part of which includes defining the channel
in which to distribute <code>Events</code> on the remote cluster.</p></li>
</ol>

<p>This last point is particularly important.   A <code>RemoteClusterChannel</code> simply
delivers <code>Events</code> in batches to a remote cluster.  Once the batches arrive, they
need to be applied in some manner to the remote cluster (locally).  To achieve this
one must specify a <code>&lt;remote-channel-scheme&gt;</code>, that of which is used to process and
replay the delivered <code>Events</code> in the remote cluster.   Typically this is simply
to a local cache, and thus a <code>&lt;local-cache-channel-scheme&gt;</code> is often appropriate.
However, this is not mandatory.  The <code>&lt;remote-channel-scheme&gt;</code> may also be any
other <code>Channel</code>, in which case a <code>RemoteClusterChannel</code> could be configured to
distribute <code>Events</code> to a remote cluster, in which the said <code>Events</code> are then
processed/replayed into a <code>CacheStoreChannel</code> that of which updates a local database
(at the remote site).</p>

<p>A Coherence Cache Configuration for a <code>RemoteClusterChannel</code> is as follows:</p>

<pre><code>&lt;cache-config
    xmlns:element="class://com.oracle.coherence.environment.extensible.namespaces.XmlElementProcessingNamespaceContentHandler"
    xmlns:event="class://com.oracle.coherence.patterns.eventdistribution.configuration.EventDistributionNamespaceContentHandler"
    element:introduce-cache-config="coherence-messagingpattern-cache-config.xml"&gt;

    &lt;defaults&gt;
        &lt;serializer&gt;pof&lt;/serializer&gt;
    &lt;/defaults&gt;

    &lt;caching-scheme-mapping&gt;
        &lt;cache-mapping&gt;
            &lt;cache-name&gt;my-cache&lt;/cache-name&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;event:distributor&gt;
                &lt;event:distributor-name&gt;{cache-name}&lt;/event:distributor-name&gt;
                &lt;event:distributor-external-name&gt;{site-name}-{cluster-name}-{cache-name}&lt;/event:distributor-external-name&gt;

                &lt;event:distributor-scheme&gt;
                    &lt;event:coherence-based-distributor-scheme/&gt;
                &lt;/event:distributor-scheme&gt;

                &lt;event:distribution-channels&gt;
                    &lt;event:distribution-channel&gt;
                        &lt;event:channel-name&gt;Remote Cache&lt;/event:channel-name&gt;
                        &lt;event:starting-mode&gt;enabled&lt;/event:starting-mode&gt;

                        &lt;event:channel-scheme&gt;
                            &lt;event:remote-cluster-channel-scheme&gt;
                                &lt;event:remote-invocation-service-name&gt;remote-invocation-scheme&lt;/event:remote-invocation-service-name&gt;
                                &lt;event:remote-channel-scheme&gt;
                                    &lt;event:local-cache-channel-scheme&gt;
                                        &lt;event:target-cache-name&gt;passive-cache&lt;/event:target-cache-name&gt;
                                    &lt;/event:local-cache-channel-scheme&gt;
                                &lt;/event:remote-channel-scheme&gt;
                            &lt;/event:remote-cluster-channel-scheme&gt;
                        &lt;/event:channel-scheme&gt;
                    &lt;/event:distribution-channel&gt;
                &lt;/event:distribution-channels&gt;
            &lt;/event:distributor&gt;

        &lt;/cache-mapping&gt;
    &lt;/caching-scheme-mapping&gt;

    &lt;caching-schemes&gt;
        &lt;distributed-scheme&gt;
            &lt;scheme-name&gt;my-distributed-scheme&lt;/scheme-name&gt;

            &lt;backing-map-scheme&gt;
                &lt;read-write-backing-map-scheme&gt;
                    &lt;internal-cache-scheme&gt;
                        &lt;local-scheme&gt;
                        &lt;/local-scheme&gt;
                    &lt;/internal-cache-scheme&gt;

                    &lt;cachestore-scheme&gt;
                        &lt;class-scheme&gt;
                            &lt;class-name&gt;com.oracle.coherence.patterns.pushreplication.PublishingCacheStore&lt;/class-name&gt;
                            &lt;init-params&gt;
                                &lt;init-param&gt;
                                    &lt;param-type&gt;java.lang.String&lt;/param-type&gt;
                                    &lt;param-value&gt;{cache-name}&lt;/param-value&gt;
                                &lt;/init-param&gt;
                            &lt;/init-params&gt;
                        &lt;/class-scheme&gt;
                    &lt;/cachestore-scheme&gt;
                &lt;/read-write-backing-map-scheme&gt;
            &lt;/backing-map-scheme&gt;

            &lt;autostart&gt;true&lt;/autostart&gt;
        &lt;/distributed-scheme&gt;

        &lt;!-- the remote invocation scheme --&gt;
        &lt;remote-invocation-scheme&gt;
            &lt;service-name&gt;remote-invocation-scheme&lt;/service-name&gt;
            &lt;initiator-config&gt;
                &lt;tcp-initiator&gt;
                    &lt;remote-addresses&gt;
                        &lt;socket-address&gt;
                            &lt;address&gt;localhost&lt;/address&gt;
                            &lt;port&gt;20002&lt;/port&gt;
                        &lt;/socket-address&gt;
                    &lt;/remote-addresses&gt;
                    &lt;connect-timeout&gt;2s&lt;/connect-timeout&gt;
                &lt;/tcp-initiator&gt;
                &lt;outgoing-message-handler&gt;
                    &lt;request-timeout&gt;5s&lt;/request-timeout&gt;
                &lt;/outgoing-message-handler&gt;
            &lt;/initiator-config&gt;
        &lt;/remote-invocation-scheme&gt;
    &lt;/caching-schemes&gt;
&lt;/cache-config&gt;
</code></pre>

<blockquote>
  <p>  In this example configuration we demonstrate how to target a different
    cache in the remote cluster, simply through the use of the <code>&lt;event:target-cache-name&gt;</code>
    parameter to the <code>&lt;event:local-cache-channel-scheme&gt;</code>.</p>
</blockquote>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
            
      </div>

                                                                  <?xml version="1.0" encoding="UTF-8"?>
<div class="copyright">Copyright Â© 2008-2013 Oracle Corporation. All rights reserved.</div>
                                                          <?xml version="1.0" encoding="UTF-8"?>
<div class="version">Version 11.1.0: 2013-08-08 15:10</div>
                  
        
                </div>
    </footer>
  </body>
</html>
